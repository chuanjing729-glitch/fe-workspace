import{_ as p,C as A,c as d,o as r,a3 as t,b as i,j as c,w as a,a as s,G as o,a4 as l}from"./chunks/framework.KoSEt7m1.js";const _=JSON.parse('{"title":"TECHNICAL_DOC","description":"","frontmatter":{"title":"TECHNICAL_DOC","editLink":true},"headers":[],"relativePath":"packages/coverage-plugin/TECHNICAL_DOC.md","filePath":"packages/coverage-plugin/TECHNICAL_DOC.md"}'),E={name:"packages/coverage-plugin/TECHNICAL_DOC.md"};function u(g,e,C,v,B,h){const n=A("Mermaid");return r(),d("div",null,[e[3]||(e[3]=t("",6)),(r(),i(l,null,{default:a(()=>[o(n,{id:"mermaid-61",class:"mermaid",graph:"classDiagram%0A%20%20%20%20class%20WebpackCoveragePlugin%20%7B%0A%20%20%20%20%20%20%20%20%2Bapply(compiler)%0A%20%20%20%20%7D%0A%20%20%20%20class%20ViteCoveragePlugin%20%7B%0A%20%20%20%20%20%20%20%20%2BconfigureServer(server)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20class%20UnpluginFactory%20%7B%0A%20%20%20%20%20%20%20%20%3C%3CFunction%3E%3E%0A%20%20%20%20%20%20%20%20%2BbuildStart()%0A%20%20%20%20%20%20%20%20%2Btransform()%0A%20%20%20%20%20%20%20%20%2BbuildEnd()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20CoveragePluginCore%20%7B%0A%20%20%20%20%20%20%20%20%2Binit()%0A%20%20%20%20%20%20%20%20%2Btransform(code%2C%20id)%0A%20%20%20%20%20%20%20%20%2BgenerateReport()%0A%20%20%20%20%7D%0A%0A%20%20%20%20namespace%20Services%20%7B%0A%20%20%20%20%20%20%20%20class%20GitService%0A%20%20%20%20%20%20%20%20class%20CoverageService%0A%20%20%20%20%20%20%20%20class%20AnalysisService%0A%20%20%20%20%20%20%20%20class%20ReportService%0A%20%20%20%20%7D%0A%0A%20%20%20%20namespace%20Infra%20%7B%0A%20%20%20%20%20%20%20%20class%20HttpServer%0A%20%20%20%20%7D%0A%0A%20%20%20%20WebpackCoveragePlugin%20..%3E%20UnpluginFactory%20%3A%20Wraps%20(%E5%B0%81%E8%A3%85)%0A%20%20%20%20ViteCoveragePlugin%20..%3E%20UnpluginFactory%20%3A%20Uses%20(%E4%BD%BF%E7%94%A8)%0A%20%20%20%20UnpluginFactory%20--%3E%20CoveragePluginCore%20%3A%20Delegates%20(%E5%A7%94%E6%89%98%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91)%0A%20%20%20%20%0A%20%20%20%20CoveragePluginCore%20--%3E%20GitService%20%3A%20Injects%20(Git%E6%93%8D%E4%BD%9C)%0A%20%20%20%20CoveragePluginCore%20--%3E%20CoverageService%20%3A%20Injects%20(%E8%A6%86%E7%9B%96%E7%8E%87%E8%AE%A1%E7%AE%97)%0A%20%20%20%20CoveragePluginCore%20--%3E%20AnalysisService%20%3A%20Injects%20(%E4%BE%9D%E8%B5%96%E5%88%86%E6%9E%90)%0A%20%20%20%20CoveragePluginCore%20--%3E%20ReportService%20%3A%20Creates%20(%E6%8A%A5%E5%91%8A%E7%94%9F%E6%88%90)%0A%20%20%20%20CoveragePluginCore%20--%3E%20HttpServer%20%3A%20Manages%20(HTTP%E6%9C%8D%E5%8A%A1)%0A"})]),fallback:a(()=>[...e[0]||(e[0]=[s(" Loading... ",-1)])]),_:1})),e[4]||(e[4]=t("",4)),(r(),i(l,null,{default:a(()=>[o(n,{id:"mermaid-72",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Bundler%20as%20Webpack%2FVite%20(%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7)%0A%20%20%20%20participant%20Adapter%20as%20Unplugin%20Adapter%20(%E9%80%82%E9%85%8D%E5%B1%82)%0A%20%20%20%20participant%20Core%20as%20CoveragePluginCore%20(%E6%A0%B8%E5%BF%83%E5%B1%82)%0A%20%20%20%20participant%20Babel%20as%20Babel(Istanbul)%20(%E6%8F%92%E6%A1%A9%E5%B7%A5%E5%85%B7)%0A%0A%20%20%20%20Bundler-%3E%3EAdapter%3A%20transform(code%2C%20id)%0A%20%20%20%20Adapter-%3E%3ECore%3A%20transform(code%2C%20id)%0A%20%20%20%20Core-%3E%3ECore%3A%20shouldInstrument(id)%3F%20(%E6%98%AF%E5%90%A6%E9%9C%80%E8%A6%81%E6%8F%92%E6%A1%A9)%0A%20%20%20%20alt%20Yes%20(%E9%9C%80%E8%A6%81)%0A%20%20%20%20%20%20%20%20Core-%3E%3EBabel%3A%20transformSync(code%2C%20plugins%3D%5Bistanbul%5D)%0A%20%20%20%20%20%20%20%20Babel--%3E%3ECore%3A%20Instrumented%20Code%20(%E6%8F%92%E6%A1%A9%E5%90%8E%E4%BB%A3%E7%A0%81)%0A%20%20%20%20%20%20%20%20Core--%3E%3EAdapter%3A%20code%0A%20%20%20%20else%20No%20(%E4%B8%8D%E9%9C%80%E8%A6%81)%0A%20%20%20%20%20%20%20%20Core--%3E%3EAdapter%3A%20null%20(skip)%0A%20%20%20%20end%0A%20%20%20%20Adapter--%3E%3EBundler%3A%20result%0A"})]),fallback:a(()=>[...e[1]||(e[1]=[s(" Loading... ",-1)])]),_:1})),e[5]||(e[5]=c("h3",{id:"_3-2-增量覆盖率计算流程",tabindex:"-1"},[s("3.2 增量覆盖率计算流程 "),c("a",{class:"header-anchor",href:"#_3-2-增量覆盖率计算流程","aria-label":'Permalink to "3.2 增量覆盖率计算流程"'},"​")],-1)),(r(),i(l,null,{default:a(()=>[o(n,{id:"mermaid-76",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Browser%20as%20Browser%20UI%2FOverlay%20(%E5%89%8D%E7%AB%AF)%0A%20%20%20%20participant%20Server%20as%20HttpServer%20(%E6%9C%8D%E5%8A%A1%E5%B1%82)%0A%20%20%20%20participant%20Core%20as%20CoverageService%20(%E6%A0%B8%E5%BF%83%E8%AE%A1%E7%AE%97)%0A%20%20%20%20participant%20Git%20as%20GitService%20(Git%E6%9C%8D%E5%8A%A1)%0A%20%20%20%20%0A%20%20%20%20Browser-%3E%3EServer%3A%20POST%20%2F__coverage_upload%0A%20%20%20%20Server-%3E%3ECore%3A%20calculate(runtimeMap)%0A%20%20%20%20%0A%20%20%20%20rect%20rgb(240%2C%20248%2C%20255)%0A%20%20%20%20note%20right%20of%20Core%3A%20Calculation%20Logic%20(%E8%AE%A1%E7%AE%97%E9%80%BB%E8%BE%91)%0A%20%20%20%20Core-%3E%3EGit%3A%20getChangedFiles()%20-%3E%20getFileDiff()%20(%E8%8E%B7%E5%8F%96%E5%8F%98%E6%9B%B4)%0A%20%20%20%20Git--%3E%3ECore%3A%20Diff%20Lines%20(%E5%B7%AE%E5%BC%82%E8%A1%8C)%0A%20%20%20%20Core-%3E%3ECore%3A%20Intersect(Diff%2C%20Runtime)%20(%E8%AE%A1%E7%AE%97%E4%BA%A4%E9%9B%86)%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20Core--%3E%3EServer%3A%20IncrementalResult%20(%E5%A2%9E%E9%87%8F%E7%BB%93%E6%9E%9C)%0A%20%20%20%20Server--%3E%3EBrowser%3A%20200%20OK%0A"})]),fallback:a(()=>[...e[2]||(e[2]=[s(" Loading... ",-1)])]),_:1})),e[6]||(e[6]=t("",6))])}const f=p(E,[["render",u]]);export{_ as __pageData,f as default};
