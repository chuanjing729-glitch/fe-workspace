import{_ as a,c as i,o as e,a3 as n}from"./chunks/framework.KoSEt7m1.js";const c=JSON.parse('{"title":"安装指南","description":"","frontmatter":{},"headers":[],"relativePath":"packages/incremental-coverage-plugin/installation.md","filePath":"packages/incremental-coverage-plugin/installation.md"}'),l={name:"packages/incremental-coverage-plugin/installation.md"};function t(p,s,h,k,r,d){return e(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="安装指南" tabindex="-1">安装指南 <a class="header-anchor" href="#安装指南" aria-label="Permalink to &quot;安装指南&quot;">​</a></h1><h2 id="前置要求" tabindex="-1">前置要求 <a class="header-anchor" href="#前置要求" aria-label="Permalink to &quot;前置要求&quot;">​</a></h2><p>在安装本插件之前，请确保：</p><ul><li>✅ <strong>Node.js</strong> &gt;= 16.0.0</li><li>✅ <strong>项目已初始化 Git 仓库</strong> (<code>git init</code>)</li><li>✅ <strong>使用 Webpack 5+ 或 Vite 3+</strong></li><li>✅ <strong>已安装 Babel</strong>（对于 Webpack 项目）</li></ul><h3 id="检查前置要求" tabindex="-1">检查前置要求 <a class="header-anchor" href="#检查前置要求" aria-label="Permalink to &quot;检查前置要求&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 Node.js 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 应该 &gt;= v16.0.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查是否是 Git 仓库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 应该不报错</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 Webpack 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webpack</span></span></code></pre></div><hr><h2 id="安装步骤" tabindex="-1">安装步骤 <a class="header-anchor" href="#安装步骤" aria-label="Permalink to &quot;安装步骤&quot;">​</a></h2><h3 id="_1-安装插件" tabindex="-1">1. 安装插件 <a class="header-anchor" href="#_1-安装插件" aria-label="Permalink to &quot;1. 安装插件&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @51jbs/incremental-coverage-plugin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span></span></code></pre></div><p>或使用 pnpm：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @51jbs/incremental-coverage-plugin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre></div><h3 id="_2-安装必要的-babel-依赖-如果尚未安装" tabindex="-1">2. 安装必要的 Babel 依赖（如果尚未安装） <a class="header-anchor" href="#_2-安装必要的-babel-依赖-如果尚未安装" aria-label="Permalink to &quot;2. 安装必要的 Babel 依赖（如果尚未安装）&quot;">​</a></h3><blockquote><p>⚠️ <strong>注意</strong>：插件已经内置了 <code>@babel/core</code> 等依赖。但如果您的项目还没有配置 Babel，需要额外安装：</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @babel/preset-env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> babel-loader</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span></span></code></pre></div><h3 id="_3-配置-babel" tabindex="-1">3. 配置 Babel <a class="header-anchor" href="#_3-配置-babel" aria-label="Permalink to &quot;3. 配置 Babel&quot;">​</a></h3><p>创建或更新 <code>babel.config.js</code>：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  presets: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-env&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      modules: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 保持 ES6 模块</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      targets: { browsers: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&gt; 1%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;last 2 versions&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 注意：不需要手动配置 babel-plugin-istanbul</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 插件会在开发模式下自动注入</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="_4-验证安装" tabindex="-1">4. 验证安装 <a class="header-anchor" href="#_4-验证安装" aria-label="Permalink to &quot;4. 验证安装&quot;">​</a></h3><p>运行以下命令确认依赖安装成功：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查插件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @51jbs/incremental-coverage-plugin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 Babel（应该看到版本号）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @babel/core</span></span></code></pre></div><hr><h2 id="故障排查" tabindex="-1">故障排查 <a class="header-anchor" href="#故障排查" aria-label="Permalink to &quot;故障排查&quot;">​</a></h2><h3 id="问题-1-找不到-babel-core" tabindex="-1">问题 1：找不到 @babel/core <a class="header-anchor" href="#问题-1-找不到-babel-core" aria-label="Permalink to &quot;问题 1：找不到 @babel/core&quot;">​</a></h3><p><strong>错误信息</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: Cannot find module &#39;@babel/core&#39;</span></span></code></pre></div><p><strong>原因</strong>：插件依赖 Babel 进行代码插桩</p><p><strong>解决方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @babel/core</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span></span></code></pre></div><h3 id="问题-2-peerdependency-警告" tabindex="-1">问题 2：peerDependency 警告 <a class="header-anchor" href="#问题-2-peerdependency-警告" aria-label="Permalink to &quot;问题 2：peerDependency 警告&quot;">​</a></h3><p><strong>警告信息</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm WARN MISSING PEER DEPENDENCY webpack@^5.0.0</span></span></code></pre></div><p><strong>原因</strong>：这是正常的，因为 webpack 和 vite 都是可选的 peer dependency</p><p><strong>解决方案</strong>：</p><ul><li>如果使用 Webpack：无需处理，只要项目中已安装 webpack</li><li>如果使用 Vite：无需处理，只要项目中已安装 vite</li></ul><h3 id="问题-3-安装后-node-modules-很大" tabindex="-1">问题 3：安装后 node_modules 很大 <a class="header-anchor" href="#问题-3-安装后-node-modules-很大" aria-label="Permalink to &quot;问题 3：安装后 node_modules 很大&quot;">​</a></h3><p><strong>原因</strong>：Istanbul 相关库会安装一些依赖</p><p><strong>优化方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用 pnpm 可以节省磁盘空间</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><hr><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to &quot;下一步&quot;">​</a></h2><p>安装完成后，请查看 <a href="./quick-start">快速开始指南</a> 了解如何配置和使用插件。</p><h2 id="卸载" tabindex="-1">卸载 <a class="header-anchor" href="#卸载" aria-label="Permalink to &quot;卸载&quot;">​</a></h2><p>如果需要卸载插件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @51jbs/incremental-coverage-plugin</span></span></code></pre></div><p>同时记得从 webpack 配置中移除插件配置。</p>`,46)])])}const g=a(l,[["render",t]]);export{c as __pageData,g as default};
