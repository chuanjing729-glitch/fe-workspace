# 报告生成功能

coverage-plugin 插件内置了自测报告生成功能，每次构建完成后会自动生成 HTML 和 Markdown 两种格式的报告。

## 报告生成机制

报告生成功能会在以下时机触发：
1. Webpack 构建完成时（通过 `done` 钩子）
2. 仅在插件启用时生成（`enabled: true`）

## 报告内容

生成的报告包含以下信息：

### 测试环境信息
- 测试时间戳
- Node.js 版本
- 操作系统信息

### 测试摘要
- 总测试数
- 通过测试数
- 失败测试数
- 通过率百分比

### 详细测试结果
- 每个测试项的名称
- 测试状态（通过/失败）
- 执行时间
- 详细信息（如果有的话）

### 测试结论
- 整体测试结果概述
- 成功或失败的提示信息

## 报告格式

### Markdown 格式
- 位置：`<outputDir>/reports/self-test-report.md`
- 适用于文档查看和版本控制
- 简洁明了的文本格式

### HTML 格式
- 位置：`<outputDir>/reports/self-test-report.html`
- 适用于浏览器查看
- 包含样式和视觉增强
- 更好的可读性和用户体验

## 自定义报告目录

可以通过配置 `outputDir` 选项来自定义报告生成目录：

```javascript
new WebpackCoveragePlugin({
  enabled: true,
  outputDir: '.custom-coverage'  // 报告将生成在 .custom-coverage/reports/ 目录下
})
```

## 集成到 CI/CD

报告生成功能可以很好地集成到持续集成和持续部署流程中：

1. 在构建步骤中启用插件
2. 构建完成后自动产生报告
3. 将报告作为构建产物上传或归档
4. 在 PR 或合并请求中展示报告结果

## 示例报告

### Markdown 报告示例
```
# coverage-plugin 自测报告

## 测试信息
- 测试时间: 2025/12/18 11:30:45
- Node.js 版本: v20.19.6
- 操作系统: darwin

## 测试摘要
- 总测试数: 5
- 通过: 5
- 失败: 0
- 通过率: 100.00%
```

### HTML 报告特点
- 响应式设计，适配不同屏幕尺寸
- 彩色状态指示器（绿色表示通过，红色表示失败）
- 图表化的测试摘要展示
- 可折叠的详细测试结果
- 现代化的视觉设计

## 禁用报告生成

如果不需要自动生成报告，可以通过以下方式禁用：

1. 不启用插件（`enabled: false`）
2. 移除插件配置