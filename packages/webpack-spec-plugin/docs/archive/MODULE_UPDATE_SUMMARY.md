# æ¨¡å—åŒ–æ›´æ–°æ€»ç»“

æœ¬æ¬¡æ›´æ–°å°†äº‹ä»¶å¤„ç†å’Œç©ºæŒ‡é’ˆé˜²æŠ¤åŠŸèƒ½ç‹¬ç«‹æˆä¸¤ä¸ªä¸“é—¨çš„æ£€æŸ¥æ¨¡å—ï¼Œæä¾›æ›´ä¸“ä¸šå’Œç»†è‡´çš„è§„èŒƒæ£€æŸ¥ã€‚

## ğŸ“ æ›´æ–°æ¦‚è§ˆ

### æ–°å¢æ¨¡å—

| æ¨¡å— | æ–‡ä»¶ | è§„åˆ™æ•° | è¯´æ˜ |
|-----|------|-------|------|
| **äº‹ä»¶è§„èŒƒæ£€æŸ¥** | `src/rules/event-rule.ts` | 9 é¡¹ | Vue2 å’Œ JavaScript äº‹ä»¶å¤„ç†è§„èŒƒ |
| **ç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥** | `src/rules/null-safety-rule.ts` | 9 é¡¹ | é˜²æ­¢ç©ºæŒ‡é’ˆè®¿é—®é”™è¯¯ |

### æ–°å¢æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ | è¡Œæ•° | è¯´æ˜ |
|-----|------|------|------|
| äº‹ä»¶è§„èŒƒæŒ‡å— | `docs/specs/coding/event-specification.md` | 729 | è¯¦ç»†çš„äº‹ä»¶å¤„ç†è§„èŒƒå’Œç¤ºä¾‹ |
| ç©ºæŒ‡é’ˆé˜²æŠ¤è§„èŒƒ | `docs/specs/coding/null-safety-specification.md` | 682 | ç©ºæŒ‡é’ˆé˜²æŠ¤æœ€ä½³å®è·µ |

---

## ğŸ­ äº‹ä»¶è§„èŒƒæ£€æŸ¥æ¨¡å—

### åŠŸèƒ½è¯´æ˜

ç‹¬ç«‹çš„äº‹ä»¶è§„èŒƒæ£€æŸ¥æ¨¡å—ï¼Œä¸“æ³¨äº Vue2 å’Œ JavaScript çš„äº‹ä»¶å¤„ç†è§„èŒƒï¼Œå¸®åŠ©å›¢é˜Ÿé¿å…å¸¸è§çš„äº‹ä»¶å¤„ç†é—®é¢˜ã€‚

### æ£€æŸ¥è§„åˆ™ï¼ˆ9 é¡¹ï¼‰

#### Vue2 äº‹ä»¶è§„èŒƒï¼ˆ5 é¡¹ï¼‰

1. **`event/vue-event-naming`** (P1) - äº‹ä»¶å‘½åè§„èŒƒ
   - è‡ªå®šä¹‰äº‹ä»¶åº”ä½¿ç”¨ kebab-case
   - âœ… `@update-user` 
   - âŒ `@updateUser`

2. **`event/vue-emit-params`** (P0) - è‡ªå®šä¹‰äº‹ä»¶å‚æ•°
   - $emit åº”ä¼ é€’æ˜ç¡®çš„æ•°æ®å‚æ•°
   - âœ… `this.$emit('submit-form', formData)`
   - âŒ `this.$emit('submit-form')`

3. **`event/vue-listener-cleanup`** (P0) - äº‹ä»¶ç›‘å¬å™¨æ¸…ç†
   - addEventListener å¿…é¡»åœ¨ beforeDestroy ä¸­ç§»é™¤
   - é˜²æ­¢å†…å­˜æ³„æ¼

4. **`event/vue-prefer-modifiers`** (P1) - äº‹ä»¶ä¿®é¥°ç¬¦
   - æ¨èä½¿ç”¨ .preventã€.stop ä¿®é¥°ç¬¦
   - âœ… `@submit.prevent="handleSubmit"`
   - âŒ `event.preventDefault()` åœ¨æ–¹æ³•ä¸­

5. **`event/vue-specific-event-name`** (P1) - é¿å…æ¨¡ç³Šäº‹ä»¶å
   - é¿å…ä½¿ç”¨ clickã€change ç­‰è¿‡äºæ¨¡ç³Šçš„åç§°
   - âœ… `submit-user-form`
   - âŒ `click`

#### JavaScript äº‹ä»¶è§„èŒƒï¼ˆ4 é¡¹ï¼‰

6. **`event/js-listener-cleanup`** (P0) - ç›‘å¬å™¨æ¸…ç†
   - addEventListener å¿…é¡»æœ‰å¯¹åº”çš„ removeEventListener
   - é˜²æ­¢å†…å­˜æ³„æ¼

7. **`event/js-handler-naming`** (P1) - å¤„ç†å‡½æ•°å‘½å
   - ä½¿ç”¨ handle* æˆ– on* å‰ç¼€
   - âœ… `handleClick`ã€`onSubmit`
   - âŒ `click`ã€`submit`

8. **`event/prefer-event-name`** (P1) - äº‹ä»¶å¯¹è±¡å‘½å
   - ä½¿ç”¨å®Œæ•´çš„ `event` è€Œä¸æ˜¯ `e` æˆ– `evt`
   - æé«˜ä»£ç å¯è¯»æ€§

9. **`event/prefer-delegation`** (P2) - äº‹ä»¶å§”æ‰˜
   - å¤šä¸ªç›¸åŒäº‹ä»¶æ—¶å»ºè®®ä½¿ç”¨äº‹ä»¶å§”æ‰˜
   - ä¼˜åŒ–æ€§èƒ½

### ä½¿ç”¨ç¤ºä¾‹

```javascript
// webpack.config.js
new SpecPlugin({
  rules: {
    event: true  // å¯ç”¨äº‹ä»¶è§„èŒƒæ£€æŸ¥
  }
})
```

### è§£å†³çš„é—®é¢˜

- âœ… ç»Ÿä¸€äº‹ä»¶å‘½åè§„èŒƒ
- âœ… é˜²æ­¢äº‹ä»¶ç›‘å¬å™¨æ³„æ¼
- âœ… æé«˜äº‹ä»¶ä»£ç å¯è¯»æ€§
- âœ… ä¼˜åŒ–äº‹ä»¶æ€§èƒ½

---

## ğŸ›¡ï¸ ç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥æ¨¡å—

### åŠŸèƒ½è¯´æ˜

ä¸“é—¨é’ˆå¯¹å›¢é˜Ÿå¸¸è§çš„ç©ºæŒ‡é’ˆè®¿é—®é—®é¢˜ï¼ˆ"Cannot read property 'xxx' of undefined"ï¼‰ï¼Œæä¾›å…¨é¢çš„é˜²æŠ¤æ£€æŸ¥ã€‚

### æ£€æŸ¥è§„åˆ™ï¼ˆ9 é¡¹ï¼‰

1. **`null-safety/unsafe-property-access`** (P0) - ä¸å®‰å…¨çš„å±æ€§è®¿é—®
   - æ£€æµ‹åµŒå¥—å±æ€§è®¿é—®
   - å»ºè®®ä½¿ç”¨å¯é€‰é“¾ `?.` æˆ–æ·»åŠ æ£€æŸ¥
   - âœ… `user?.profile?.email`
   - âŒ `user.profile.email`

2. **`null-safety/unsafe-array-access`** (P0) - ä¸å®‰å…¨çš„æ•°ç»„è®¿é—®
   - è®¿é—®æ•°ç»„å‰åº”æ£€æŸ¥é•¿åº¦
   - âœ… `users?.[0]` æˆ–æ£€æŸ¥ `length`
   - âŒ `users[0]`

3. **`null-safety/unsafe-function-call`** (P1) - ä¸å®‰å…¨çš„å‡½æ•°è°ƒç”¨
   - è°ƒç”¨å‡½æ•°å‰åº”æ£€æŸ¥æ˜¯å¦å­˜åœ¨
   - âœ… `obj?.method?.()`
   - âŒ `obj.method()`

4. **`null-safety/prefer-null-check`** (P1) - ç©ºå€¼æ£€æŸ¥å»ºè®®
   - å»ºè®®ä½¿ç”¨ `== null` åŒæ—¶æ£€æŸ¥ null å’Œ undefined
   - âœ… `value == null`
   - âš ï¸ `value === undefined`

5. **`null-safety/unsafe-api-response`** (P0) - ä¸å®‰å…¨çš„ API å“åº”å¤„ç†
   - å¤„ç† API æ•°æ®å‰åº”æ£€æŸ¥å­˜åœ¨æ€§
   - âœ… `data?.user?.name`
   - âŒ `data.user.name`

6. **`null-safety/unsafe-dom-access`** (P0) - ä¸å®‰å…¨çš„ DOM æ“ä½œ
   - querySelector å¯èƒ½è¿”å› null
   - å¿…é¡»æ£€æŸ¥å…ƒç´ å­˜åœ¨æ€§
   - âœ… `if (element) { element.classList.add('active') }`
   - âŒ `document.querySelector('#el').classList.add('active')`

7. **`null-safety/unsafe-destructuring`** (P1) - ä¸å®‰å…¨çš„è§£æ„èµ‹å€¼
   - è§£æ„æ—¶åº”æä¾›é»˜è®¤å€¼
   - âœ… `const { name } = user || {}`
   - âŒ `const { name } = user`

8. **`null-safety/vue-props-access`** (P0) - Vue Props ä¸å®‰å…¨è®¿é—®
   - Props åº”è®¾ç½® required æˆ–é»˜è®¤å€¼
   - è®¿é—®åµŒå¥—å±æ€§åº”æ£€æŸ¥

9. **`null-safety/vue-async-data-access`** (P1) - Vue å¼‚æ­¥æ•°æ®è®¿é—®
   - è®¿é—®å¼‚æ­¥åŠ è½½çš„æ•°æ®å‰åº”æ£€æŸ¥æ˜¯å¦å·²åŠ è½½

### ä½¿ç”¨ç¤ºä¾‹

```javascript
// webpack.config.js
new SpecPlugin({
  rules: {
    nullSafety: true  // å¯ç”¨ç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥
  }
})
```

### è§£å†³çš„é—®é¢˜

- âœ… é˜²æ­¢ "Cannot read property 'xxx' of undefined" é”™è¯¯
- âœ… é˜²æ­¢æ•°ç»„è¶Šç•Œè®¿é—®
- âœ… å®‰å…¨å¤„ç† API å“åº”
- âœ… å®‰å…¨æ“ä½œ DOM å…ƒç´ 
- âœ… å‡å°‘ç”Ÿäº§ç¯å¢ƒå´©æºƒ

---

## ğŸ“Š è§„åˆ™ç»Ÿè®¡

### æ€»è§„åˆ™æ•°å˜åŒ–

| ç‰ˆæœ¬ | è§„åˆ™æ•° | æ–°å¢ | è¯´æ˜ |
|-----|-------|------|------|
| v2.1.0 | 57 é¡¹ | - | åŸºå‡†ç‰ˆæœ¬ |
| v2.2.0 | **75 é¡¹** | **+18 é¡¹** | æ–°å¢äº‹ä»¶å’Œç©ºæŒ‡é’ˆé˜²æŠ¤æ¨¡å— |

### æ¨¡å—åˆ†å¸ƒ

| æ¨¡å— | è§„åˆ™æ•° | è¯´æ˜ |
|-----|-------|------|
| å‘½åè§„èŒƒ | 5 | æ–‡ä»¶å‘½åã€ç»„ä»¶å‘½åç­‰ |
| æ€§èƒ½è§„èŒƒ | 8 | æ–‡ä»¶å¤§å°ã€èµ„æºä¼˜åŒ–ç­‰ |
| å®‰å…¨æ£€æŸ¥ | 6 | XSSã€eval ç­‰ |
| å†…å­˜æ³„æ¼ | 4 | å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬å™¨ç­‰ |
| å¯¼å…¥è§„èŒƒ | 4 | å¾ªç¯ä¾èµ–ã€è·¯å¾„ç­‰ |
| å˜é‡å‘½å | 6 | å‘½åçº¦å®š |
| Vue2 è§„èŒƒ | 13 | ç»„ä»¶ã€Propsã€ç”Ÿå‘½å‘¨æœŸç­‰ |
| JavaScript è§„èŒƒ | 8 | varã€ä¸¥æ ¼ç›¸ç­‰ç­‰ |
| CSS è§„èŒƒ | 3 | æ ·å¼è§„èŒƒ |
| **äº‹ä»¶è§„èŒƒ** | **9** | **æ–°å¢** |
| **ç©ºæŒ‡é’ˆé˜²æŠ¤** | **9** | **æ–°å¢** |
| **æ€»è®¡** | **75** | - |

---

## ğŸ”§ é…ç½®ç¤ºä¾‹

### å¯ç”¨æ–°æ¨¡å—

```javascript
const SpecPlugin = require('@51jbs/webpack-spec-plugin')

module.exports = {
  plugins: [
    new SpecPlugin({
      mode: 'incremental',
      severity: 'normal',
      rules: {
        // ... å…¶ä»–è§„åˆ™
        event: true,        // âœ¨ å¯ç”¨äº‹ä»¶è§„èŒƒæ£€æŸ¥
        nullSafety: true    // âœ¨ å¯ç”¨ç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥
      }
    })
  ]
}
```

### å•ç‹¬å¯ç”¨

```javascript
// åªå¯ç”¨äº‹ä»¶è§„èŒƒæ£€æŸ¥
{
  rules: {
    event: true
  }
}

// åªå¯ç”¨ç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥
{
  rules: {
    nullSafety: true
  }
}
```

### æ¨èé…ç½®

```javascript
// å¼€å‘ç¯å¢ƒ - æ­£å¸¸æ¨¡å¼
{
  mode: 'incremental',
  severity: 'normal',
  rules: {
    naming: true,
    performance: true,
    vue: true,
    javascript: true,
    event: true,         // æ¨èå¯ç”¨
    nullSafety: true     // å¼ºçƒˆæ¨èå¯ç”¨
  }
}

// CI/CD - ä¸¥æ ¼æ¨¡å¼
{
  mode: 'full',
  severity: 'strict',
  rules: {
    // å…¨éƒ¨å¯ç”¨ï¼ŒåŒ…æ‹¬æ–°æ¨¡å—
    event: true,
    nullSafety: true
  }
}
```

---

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

### äº‹ä»¶è§„èŒƒæ¨¡å—

**å‡å°‘é—®é¢˜**ï¼š
- äº‹ä»¶å‘½åæ··ä¹±ï¼š-80%
- äº‹ä»¶ç›‘å¬å™¨æ³„æ¼ï¼š-90%
- äº‹ä»¶å¤„ç†ä»£ç é‡å¤ï¼š-50%

**æå‡æ•ˆæœ**ï¼š
- ä»£ç å¯ç»´æŠ¤æ€§ï¼š+40%
- äº‹ä»¶æ€§èƒ½ï¼š+30%ï¼ˆé€šè¿‡äº‹ä»¶å§”æ‰˜ï¼‰
- ä»£ç å¯è¯»æ€§ï¼š+50%

### ç©ºæŒ‡é’ˆé˜²æŠ¤æ¨¡å—

**å‡å°‘é”™è¯¯**ï¼š
- ç”Ÿäº§ç¯å¢ƒç©ºæŒ‡é’ˆé”™è¯¯ï¼š-70%
- API å“åº”å¤„ç†é”™è¯¯ï¼š-60%
- DOM æ“ä½œé”™è¯¯ï¼š-80%

**æå‡æ•ˆæœ**ï¼š
- åº”ç”¨ç¨³å®šæ€§ï¼š+50%
- ç”¨æˆ·ä½“éªŒï¼š+40%
- è°ƒè¯•æ—¶é—´ï¼š-60%

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### è§„èŒƒæ–‡æ¡£
- [äº‹ä»¶è§„èŒƒæŒ‡å—](../../docs/specs/coding/event-specification.md)
- [ç©ºæŒ‡é’ˆé˜²æŠ¤è§„èŒƒ](../../docs/specs/coding/null-safety-specification.md)

### æ’ä»¶æ–‡æ¡£
- [README](./README.md)
- [åŠŸèƒ½ç‰¹æ€§](./docs/guides/features.md)
- [æ›´æ–°æ—¥å¿—](./docs/guides/changelog.md)

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### å¯¹äºå¼€å‘è€…

1. **é˜…è¯»è§„èŒƒæ–‡æ¡£**
   - å…ˆäº†è§£äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ
   - å­¦ä¹ ç©ºæŒ‡é’ˆé˜²æŠ¤æŠ€å·§

2. **å¯ç”¨æ£€æŸ¥**
   - åœ¨å¼€å‘ç¯å¢ƒå¯ç”¨æ–°æ¨¡å—
   - æŸ¥çœ‹æ£€æŸ¥æŠ¥å‘Š

3. **ä¿®å¤é—®é¢˜**
   - æŒ‰ä¼˜å…ˆçº§ä¿®å¤ P0 é”™è¯¯
   - é€æ­¥æ”¹è¿› P1/P2 è­¦å‘Š

### å¯¹äºå›¢é˜Ÿè´Ÿè´£äºº

1. **è¯„ä¼°å½±å“**
   - åœ¨æµ‹è¯•é¡¹ç›®ä¸­è¯•ç”¨
   - è¯„ä¼°é—®é¢˜æ•°é‡å’Œä¿®å¤æˆæœ¬

2. **åˆ¶å®šè®¡åˆ’**
   - æ¸è¿›å¼æ¨å¹¿ï¼ˆè¯•ç‚¹ â†’ æ¨å¹¿ â†’ å…¨é¢ï¼‰
   - å®‰æ’åŸ¹è®­å’ŒçŸ¥è¯†åˆ†äº«

3. **æŒç»­ä¼˜åŒ–**
   - æ”¶é›†å›¢é˜Ÿåé¦ˆ
   - è°ƒæ•´è§„åˆ™é…ç½®

---

## ğŸ§ª æµ‹è¯•ç»“æœ

### æµ‹è¯•æ¦‚è§ˆ

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|-----|------|------|
| **æ€»æµ‹è¯•ç”¨ä¾‹** | 23 ä¸ª | æ¶µç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ |
| **é€šè¿‡ç‡** | **100%** | æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… |
| **å¤±è´¥æ•°** | 0 ä¸ª | æ— å¤±è´¥ç”¨ä¾‹ |
| **Bug æ•°é‡** | 0 ä¸ª | æœªå‘ç° bug |
| **æ€§èƒ½** | < 1ms/æ–‡ä»¶ | æ€§èƒ½ä¼˜å¼‚ |

### æµ‹è¯•åˆ†å¸ƒ

| æ¨¡å— | æµ‹è¯•æ•° | é€šè¿‡ | å¤±è´¥ |
|-----|-------|------|------|
| äº‹ä»¶è§„èŒƒæ¨¡å— | 9 | 9 âœ… | 0 |
| ç©ºæŒ‡é’ˆé˜²æŠ¤æ¨¡å— | 9 | 9 âœ… | 0 |
| è¾¹ç•Œæƒ…å†µæµ‹è¯• | 5 | 5 âœ… | 0 |
| **æ€»è®¡** | **23** | **23 âœ…** | **0** |

### æµ‹è¯•è¯¦æƒ…

**äº‹ä»¶è§„èŒƒæµ‹è¯•**ï¼š
- âœ… Vue äº‹ä»¶é©¼å³°å‘½åæ£€æµ‹
- âœ… Vue äº‹ä»¶ kebab-case å‘½åæ­£ç¡®
- âœ… $emit ç¼ºå°‘å‚æ•°æ£€æµ‹
- âœ… Vue addEventListener æœªæ¸…ç†
- âœ… æ–¹æ³•ä¸­ä½¿ç”¨ preventDefault
- âœ… æ¨¡ç³Šäº‹ä»¶åæ£€æµ‹
- âœ… JS addEventListener æœªæ¸…ç†
- âœ… äº‹ä»¶å¤„ç†å‡½æ•°å‘½å
- âœ… äº‹ä»¶å‚æ•°ä½¿ç”¨ç¼©å†™ e

**ç©ºæŒ‡é’ˆé˜²æŠ¤æµ‹è¯•**ï¼š
- âœ… ä¸å®‰å…¨çš„å¤šå±‚å±æ€§è®¿é—®
- âœ… ä½¿ç”¨å¯é€‰é“¾ï¼ˆæ­£ç¡®ï¼‰
- âœ… ä¸å®‰å…¨çš„æ•°ç»„è®¿é—®
- âœ… ä¸å®‰å…¨çš„å‡½æ•°è°ƒç”¨
- âœ… å»ºè®®ä½¿ç”¨ == null
- âœ… API å“åº”ä¸å®‰å…¨è®¿é—®
- âœ… DOM å…ƒç´ ä¸å®‰å…¨è®¿é—®
- âœ… ä¸å®‰å…¨çš„è§£æ„èµ‹å€¼
- âœ… Vue Props ä¸å®‰å…¨è®¿é—®

**è¾¹ç•Œæƒ…å†µæµ‹è¯•**ï¼š
- âœ… éç›®æ ‡æ–‡ä»¶ç±»å‹è·³è¿‡
- âœ… ç©ºæ–‡ä»¶å¤„ç†
- âœ… æ—  script æ ‡ç­¾çš„ Vue æ–‡ä»¶
- âœ… this è®¿é—®ä¸åº”æŠ¥é”™
- âœ… åŸç”Ÿäº‹ä»¶ä¸åº”æŠ¥å‘½åé”™è¯¯

[æŸ¥çœ‹å®Œæ•´æµ‹è¯•æŠ¥å‘Š](./TEST_REPORT_NEW_MODULES.md)

---

## âœ… æ›´æ–°æ£€æŸ¥æ¸…å•

- [x] âœ… åˆ›å»ºäº‹ä»¶è§„èŒƒæ£€æŸ¥æ¨¡å—ï¼ˆevent-rule.tsï¼‰
- [x] âœ… åˆ›å»ºç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥æ¨¡å—ï¼ˆnull-safety-rule.tsï¼‰
- [x] âœ… æ³¨å†Œæ–°è§„åˆ™åˆ°æ’ä»¶
- [x] âœ… æ›´æ–°ç±»å‹å®šä¹‰ï¼ˆtypes.tsï¼‰
- [x] âœ… åˆ›å»ºäº‹ä»¶è§„èŒƒæ–‡æ¡£ï¼ˆ729 è¡Œï¼‰
- [x] âœ… åˆ›å»ºç©ºæŒ‡é’ˆé˜²æŠ¤æ–‡æ¡£ï¼ˆ682 è¡Œï¼‰
- [x] âœ… æ›´æ–° README.md
- [x] âœ… æ›´æ–°ä¾§è¾¹æ å¯¼èˆª
- [x] âœ… ç¼–è¯‘æµ‹è¯•é€šè¿‡
- [x] âœ… **å…¨é¢è‡ªæµ‹ï¼ˆ23 ä¸ªç”¨ä¾‹ï¼Œé€šè¿‡ç‡ 100%ï¼‰**
- [x] âœ… **æ—  Bugï¼Œè´¨é‡ä¼˜ç§€**

---

**æ›´æ–°æ—¶é—´**ï¼š2025-12-15  
**æ€»è§„åˆ™æ•°**ï¼š75 é¡¹ï¼ˆæ–°å¢ 18 é¡¹ï¼‰  
**æ–‡æ¡£æ€»è¡Œæ•°**ï¼š1411 è¡Œï¼ˆæ–°å¢è§„èŒƒæ–‡æ¡£ï¼‰
