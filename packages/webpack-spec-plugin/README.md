# @51jbs/webpack-spec-plugin

> Webpack æ’ä»¶ï¼Œç”¨äºè‡ªåŠ¨æ£€æŸ¥ä»£ç è§„èŒƒã€æ€§èƒ½å’Œå®‰å…¨é—®é¢˜ï¼Œå¹¶ç”Ÿæˆè¯¦ç»†çš„ HTML æŠ¥å‘Š

[![npm version](https://img.shields.io/npm/v/@51jbs/webpack-spec-plugin.svg)](https://www.npmjs.com/package/@51jbs/webpack-spec-plugin)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## âœ¨ ç‰¹æ€§

### ğŸ“ **ä»£ç è§„èŒƒæ£€æŸ¥** - 57 é¡¹å…¨é¢æ£€æŸ¥
- ğŸ¨ **Vue2 è§„èŒƒæ£€æŸ¥** - 13 é¡¹ä¸“é¡¹æ£€æŸ¥ï¼ˆç»„ä»¶å‘½åã€Propsã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼‰
- ğŸ”§ **JavaScript è§„èŒƒæ£€æŸ¥** - 8 é¡¹è¯­æ³•æ£€æŸ¥ï¼ˆç¦ç”¨ varã€ä¸¥æ ¼ç›¸ç­‰ã€æ¨¡æ¿å­—ç¬¦ä¸²ç­‰ï¼‰
- ğŸ“ **æ–‡ä»¶å‘½åè§„èŒƒ** - 5 é¡¹æ£€æŸ¥ï¼ˆVue ç»„ä»¶ã€JS æ–‡ä»¶ã€æµ‹è¯•æ–‡ä»¶ç­‰ï¼‰
- ğŸ”¤ **å˜é‡å‘½åæ£€æŸ¥** - 6 é¡¹æ£€æŸ¥ï¼ˆå¸¸é‡ã€å˜é‡ã€ç±»åã€å¸ƒå°”å€¼ç­‰ï¼‰
- ğŸ“¥ **å¯¼å…¥è§„èŒƒæ£€æŸ¥** - 6 é¡¹æ£€æŸ¥ï¼ˆå¾ªç¯ä¾èµ–ã€æœªä½¿ç”¨å¯¼å…¥ã€é‡å¤å¯¼å…¥ç­‰ï¼‰
- ğŸ“ **æ³¨é‡Šè§„èŒƒæ£€æŸ¥** - 3 é¡¹æ£€æŸ¥ï¼ˆJSDocã€TODO/FIXMEã€å¤§æ®µæ³¨é‡Šä»£ç ï¼‰
- ğŸ­ **äº‹ä»¶è§„èŒƒæ£€æŸ¥** - 9 é¡¹ä¸“é¡¹æ£€æŸ¥ï¼ˆVue2 äº‹ä»¶ã€JavaScript äº‹ä»¶ï¼‰
- ğŸ›¡ï¸ **ç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥** - 9 é¡¹å®‰å…¨æ£€æŸ¥ï¼ˆå±æ€§è®¿é—®ã€æ•°ç»„ã€API å“åº”ï¼‰
- ğŸ¯ **è¾¹ç•Œå¤„ç†è§„èŒƒæ£€æŸ¥** - 11 é¡¹è¾¹ç•Œæ£€æŸ¥ï¼ˆå¾ªç¯ã€é€’å½’ã€é™¤é›¶ã€åˆ†é¡µç­‰ï¼‰
- ğŸ”¥ **æœ€ä½³å®è·µæ£€æŸ¥** - 10 é¡¹æ£€æŸ¥ï¼ˆæ·±æ‹·è´ã€consoleã€varã€Promiseé“¾ç­‰ï¼‰
- ğŸ“§ **æ¶ˆæ¯æç¤ºä¸€è‡´æ€§** - 7 é¡¹æ£€æŸ¥ï¼ˆç»Ÿä¸€æ¶ˆæ¯æç¤ºç”¨æ³•ï¼‰
- ğŸ”’ **æ¥å£å®‰å…¨æ£€æŸ¥** - 8 é¡¹æ£€æŸ¥ï¼ˆé”™è¯¯å¤„ç†ã€å“åº”æ ¡éªŒã€è¶…æ—¶è®¾ç½®ç­‰ï¼‰
- âœ… **è¡¨å•éªŒè¯æ£€æŸ¥** - 9 é¡¹æ£€æŸ¥ï¼ˆéªŒè¯è§„åˆ™ã€å¿…å¡«é¡¹ã€æäº¤æ£€æŸ¥ç­‰ï¼‰
- ğŸ“¦ **ä¾èµ–æ£€æŸ¥** - 6 é¡¹æ£€æŸ¥ï¼ˆé‡å¤å¯¼å…¥ã€æœªä½¿ç”¨å¯¼å…¥ã€è·¯å¾„ä¼˜åŒ–ç­‰ï¼‰

### âš¡ **æ€§èƒ½ä¸å®‰å…¨æ£€æŸ¥**
- âš¡ **æ€§èƒ½æ£€æŸ¥** - å›¾ç‰‡/JS/CSS æ–‡ä»¶å¤§å°é¢„ç®—
- ğŸ”’ **å®‰å…¨æ£€æŸ¥** - XSS é£é™©ã€eval ä½¿ç”¨ã€æ•æ„Ÿä¿¡æ¯æ³„éœ²
- ğŸ’§ **å†…å­˜æ³„æ¼æ£€æŸ¥** - å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬å™¨ã€å…¨å±€å˜é‡æ±¡æŸ“

### ğŸ“Š **æŠ¥å‘Šä¸å·¥å…·**
- ğŸ“Š **HTML æŠ¥å‘Š** - è¯¦ç»†çš„ä¿®å¤æ–¹æ¡ˆ + ä»£ç å¯¹æ¯” + ä¼˜å…ˆçº§æ ‡ç­¾
- ğŸš€ **å¢é‡æ£€æŸ¥** - åªæ£€æŸ¥ Git å˜æ›´æ–‡ä»¶ï¼Œæé«˜æ•ˆç‡
- ğŸ’¾ **æ–‡ä»¶ç¼“å­˜** - MD5 å“ˆå¸Œç¼“å­˜ï¼Œé¿å…é‡å¤æ£€æŸ¥
- ğŸ¯ **Git Hooks** - pre-commit è‡ªåŠ¨æ£€æŸ¥

---

## ğŸ“š æ–‡æ¡£

- **[ğŸ‘‹ å¿«é€Ÿå¼€å§‹](./docs/guides/quick-start.md)** - 5 åˆ†é’Ÿä¸Šæ‰‹
- **[âœ¨ åŠŸèƒ½ç‰¹æ€§](./docs/guides/features.md)** - å®Œæ•´åŠŸèƒ½åˆ—è¡¨
- **[ğŸ“– Vue2 å¼€å‘è§„èŒƒ](../../docs/specs/coding/vue2-guide.md)** - 1160 è¡Œè¯¦ç»†æŒ‡å—
- **[ğŸ“– JavaScript å¼€å‘è§„èŒƒ](../../docs/specs/coding/javascript-typescript-guide.md)** - 1200 è¡Œè¯¦ç»†æŒ‡å—
- **[ğŸ­ äº‹ä»¶è§„èŒƒ](../../docs/specs/coding/event-specification.md)** - 9 é¡¹äº‹ä»¶å¤„ç†è§„èŒƒ
- **[ğŸ›¡ï¸ ç©ºæŒ‡é’ˆé˜²æŠ¤è§„èŒƒ](../../docs/specs/coding/null-safety-specification.md)** - 9 é¡¹é˜²ç©ºæ£€æŸ¥
- **[ğŸ“Š HTML æŠ¥å‘Š](./docs/reports/html-report-guide.md)** - æŠ¥å‘ŠåŠŸèƒ½è¯¦è§£
- **[âœ… çœŸå®é¡¹ç›®éªŒè¯](./docs/reports/real-project-validation.md)** - ç”Ÿäº§é¡¹ç›®éªŒè¯æŠ¥å‘Š
- **[ğŸ§ª ç”Ÿäº§ç¯å¢ƒè¯„ä¼°](./docs/reports/final-validation.md)** - ç»¼åˆè¯„åˆ† 94.05/100
- **[ğŸ“ æ›´æ–°æ—¥å¿—](./docs/guides/changelog.md)** - ç‰ˆæœ¬æ›´æ–°è®°å½•

---

## ğŸ“¦ å®‰è£…

```bash
npm install @51jbs/webpack-spec-plugin --save-dev
```

---

## âš™ï¸ å¿«é€Ÿé…ç½®

### webpack.config.js

```javascript
const SpecPlugin = require('@51jbs/webpack-spec-plugin')

module.exports = {
  plugins: [
    new SpecPlugin({
      // æ£€æŸ¥æ¨¡å¼ï¼š'incremental' | 'full'
      mode: 'incremental',
      
      // ä¸¥æ ¼ç¨‹åº¦ï¼š'normal' | 'strict'
      severity: 'normal',
      
      // å¯ç”¨çš„è§„åˆ™
      rules: {
        naming: true,              // æ–‡ä»¶å‘½åæ£€æŸ¥
        comments: true,            // æ³¨é‡Šè§„èŒƒæ£€æŸ¥
        performance: true,         // æ€§èƒ½æ£€æŸ¥
        imports: true,             // å¯¼å…¥è§„èŒƒæ£€æŸ¥
        variableNaming: true,      // å˜é‡å‘½åæ£€æŸ¥
        memoryLeak: true,          // å†…å­˜æ³„æ¼æ£€æŸ¥
        security: true,            // å®‰å…¨æ£€æŸ¥
        vue: true,                 // Vue2 è§„èŒƒæ£€æŸ¥ï¼ˆ13 é¡¹ï¼‰
        javascript: true,          // JavaScript è§„èŒƒæ£€æŸ¥ï¼ˆ8 é¡¹ï¼‰
        event: true,               // äº‹ä»¶è§„èŒƒæ£€æŸ¥ï¼ˆ9 é¡¹ï¼‰
        nullSafety: true,          // ç©ºæŒ‡é’ˆé˜²æŠ¤æ£€æŸ¥ï¼ˆ9 é¡¹ï¼‰
        boundary: true,            // è¾¹ç•Œå¤„ç†è§„èŒƒæ£€æŸ¥ï¼ˆ11 é¡¹ï¼‰
        bestPractice: true,        // æœ€ä½³å®è·µæ£€æŸ¥ï¼ˆ10 é¡¹ï¼‰
        messageConsistency: true,  // æ¶ˆæ¯æç¤ºä¸€è‡´æ€§ï¼ˆ7 é¡¹ï¼‰
        apiSafety: true,           // æ¥å£å®‰å…¨æ£€æŸ¥ï¼ˆ8 é¡¹ï¼‰
        formValidation: true,      // è¡¨å•éªŒè¯æ£€æŸ¥ï¼ˆ9 é¡¹ï¼‰
        dependencyCheck: true      // ä¾èµ–æ£€æŸ¥ï¼ˆ6 é¡¹ï¼‰
      },
      
      // æ€§èƒ½é¢„ç®—
      performanceBudget: {
        maxImageSize: 500,  // KB
        maxJsSize: 300,
        maxCssSize: 100
      },
      
      // HTML æŠ¥å‘Šï¼ˆç”Ÿæˆåœ¨ .spec-cache ç›®å½•ï¼‰
      htmlReport: true,
      reportPath: '.spec-cache/spec-report.html'
    })
  ]
}
```

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### 1. æœ¬åœ°å¼€å‘

```bash
npm run dev
# è‡ªåŠ¨æ£€æŸ¥å˜æ›´æ–‡ä»¶
```

### 2. æŸ¥çœ‹æŠ¥å‘Š

```bash
open .spec-cache/spec-report.html
```

### 3. ç”Ÿäº§æ„å»º

```bash
npm run build
# å…¨é‡æ£€æŸ¥ + ç”ŸæˆæŠ¥å‘Š
```

---

## ğŸ“Š æŠ¥å‘Šç¤ºä¾‹

### v2.0 å¢å¼ºç‰ˆæŠ¥å‘Š

æŠ¥å‘ŠåŒ…å«ï¼š

1. **ğŸ“ æ•´ä½“æ€»ç»“** - æ£€æŸ¥æ¦‚è§ˆ + é—®é¢˜åˆ†ç±» + ä¼˜å…ˆçº§å»ºè®®
2. **ğŸ·ï¸ ä¼˜å…ˆçº§æ ‡ç­¾** - P0/P1/P2 æ˜ç¡®æ ‡è¯†
3. **ğŸ”§ è¯¦ç»†ä¿®å¤æ–¹æ¡ˆ** - åˆ†æ­¥éª¤ä¿®å¤æŒ‡å¯¼
4. **ğŸ’¡ ä»£ç å¯¹æ¯”** - ä¿®æ”¹å‰/ä¿®æ”¹åå¯¹æ¯”å±•ç¤º
5. **ğŸ“Š ç»Ÿè®¡å›¾è¡¨** - è§„åˆ™åˆ†å¸ƒå¯è§†åŒ–

**æ”¯æŒçš„é—®é¢˜ç±»å‹**ï¼š
- âœ… å†…å­˜æ³„æ¼ï¼ˆå®šæ—¶å™¨/å…¨å±€å˜é‡ï¼‰
- âœ… å®‰å…¨é£é™©ï¼ˆXSS æ”»å‡»ï¼‰
- âœ… æ€§èƒ½é—®é¢˜ï¼ˆå›¾ç‰‡è¿‡å¤§ï¼‰
- âœ… å¯¼å…¥è§„èŒƒï¼ˆç¼ºå°‘æ‰©å±•åï¼‰
- âœ… Vue2 è§„èŒƒï¼ˆç»„ä»¶å‘½å/Props/ç”Ÿå‘½å‘¨æœŸï¼‰
- âœ… JavaScript è§„èŒƒï¼ˆvar/ä¸¥æ ¼ç›¸ç­‰/æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰
- âœ… äº‹ä»¶è§„èŒƒï¼ˆäº‹ä»¶å‘½å/ç›‘å¬å™¨æ¸…ç†ï¼‰
- âœ… ç©ºæŒ‡é’ˆé˜²æŠ¤ï¼ˆå±æ€§è®¿é—®/APIå“åº”/DOMæ“ä½œï¼‰
- âœ… è¾¹ç•Œå¤„ç†ï¼ˆå¾ªç¯/é€’å½’/é™¤é›¶/åˆ†é¡µï¼‰
- âœ… æœ€ä½³å®è·µï¼ˆæ·±æ‹·è´/console/varç­‰ï¼‰
- âœ… æ¶ˆæ¯æç¤ºä¸€è‡´æ€§
- âœ… æ¥å£å®‰å…¨æ£€æŸ¥
- âœ… è¡¨å•éªŒè¯æ£€æŸ¥
- âœ… ä¾èµ–æ£€æŸ¥

---

## âœ… çœŸå®é¡¹ç›®éªŒè¯

### mall-portal-front é¡¹ç›®

**é¡¹ç›®è§„æ¨¡**ï¼š
- æ€»æ–‡ä»¶æ•°ï¼š1,452 ä¸ª
- JavaScript/Vueï¼š633 ä¸ª
- ä»£ç è§„æ¨¡ï¼š~50,000 è¡Œ

**å‘ç°é—®é¢˜**ï¼š
- é”™è¯¯ï¼š8 ä¸ª
- è­¦å‘Šï¼š20 ä¸ª
- æ€»è®¡ï¼š**28 ä¸ª**

**é—®é¢˜åˆ†ç±»**ï¼š
- å†…å­˜æ³„æ¼ï¼š6 ä¸ª
- å®‰å…¨é£é™©ï¼š1 ä¸ª
- æ€§èƒ½é—®é¢˜ï¼š9 ä¸ª
- å¯¼å…¥è§„èŒƒï¼š12 ä¸ª

**ä¼˜åŒ–ä»·å€¼**ï¼š
- å›¾ç‰‡ä¼˜åŒ–ï¼š8-10 MB (å‡å°‘ 67-75%)
- åŠ è½½é€Ÿåº¦ï¼šæå‡ 50-70%
- é¦–å±æ—¶é—´ï¼š8s â†’ 2-3s

[æŸ¥çœ‹å®Œæ•´éªŒè¯æŠ¥å‘Š](./docs/reports/real-project-validation.md)

---

## ğŸ“ ä¿®å¤ç¤ºä¾‹

### å†…å­˜æ³„æ¼ - å®šæ—¶å™¨

**é—®é¢˜ä»£ç **ï¼š
```vue
export default {
  mounted() {
    setInterval(() => {
      this.updateTime()
    }, 1000)
  }
}
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```vue
export default {
  data() {
    return { timer: null }
  },
  mounted() {
    this.timer = setInterval(() => {
      this.updateTime()
    }, 1000)
  },
  beforeUnmount() {
    if (this.timer) {
      clearInterval(this.timer)
      this.timer = null
    }
  }
}
```

[æŸ¥çœ‹æ›´å¤šç¤ºä¾‹](./docs/mall-portal-frontè§„èŒƒæ£€æŸ¥è¯¦ç»†æŠ¥å‘Š.html)

### Vue2 è§„èŒƒ - ç»„ä»¶å‘½å

**é—®é¢˜ä»£ç **ï¼š
```vue
<script>
export default {
  name: 'Todo'  // âŒ å•ä¸ªå•è¯ï¼Œä¸ HTML å…ƒç´ æ˜“å†²çª
}
</script>
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```vue
<script>
export default {
  name: 'TodoItem'  // âœ… å¤šä¸ªå•è¯ï¼Œç¬¦åˆè§„èŒƒ
}
</script>
```

### JavaScript è§„èŒƒ - ç¦æ­¢ var

**é—®é¢˜ä»£ç **ï¼š
```javascript
var userName = 'Alice'  // âŒ ä½¿ç”¨ varï¼Œæœ‰å˜é‡æå‡é—®é¢˜
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```javascript
const userName = 'Alice'  // âœ… ä½¿ç”¨ constï¼Œæ›´å®‰å…¨
```

### æ¥å£å®‰å…¨æ£€æŸ¥

**é—®é¢˜ä»£ç **ï¼š
```javascript
// âŒ ç¼ºå°‘é”™è¯¯å¤„ç†
axios.get('/api/user').then(res => {
  this.user = res.data
})
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```javascript
// âœ… æ·»åŠ é”™è¯¯å¤„ç†
axios.get('/api/user')
  .then(res => {
    this.user = res.data
  })
  .catch(err => {
    console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', err)
    this.$message.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥')
  })
```

[æŸ¥çœ‹å®Œæ•´è§„èŒƒæ–‡æ¡£](../../docs/specs/coding/vue2-guide.md)

---

## ğŸ¯ ç‰¹è‰²åŠŸèƒ½

### 1. ä¸æ±¡æŸ“é¡¹ç›®ç›®å½•

æ‰€æœ‰ç”Ÿæˆæ–‡ä»¶éƒ½åœ¨ `.spec-cache` ç›®å½•ä¸­ï¼š
```
.spec-cache/
  â”œâ”€â”€ spec-report.html    # HTML æŠ¥å‘Š
  â””â”€â”€ check-cache.json    # æ£€æŸ¥ç¼“å­˜
```

å·²è‡ªåŠ¨æ·»åŠ åˆ° `.gitignore`ï¼Œä¸å½±å“ç‰ˆæœ¬æ§åˆ¶ã€‚

### 2. æ™ºèƒ½ç¼“å­˜æœºåˆ¶

- åŸºäº MD5 å“ˆå¸Œç¼“å­˜
- æœªå˜æ›´æ–‡ä»¶è·³è¿‡æ£€æŸ¥
- æé«˜æ£€æŸ¥æ•ˆç‡ ~85%

### 3. ä¼˜å…ˆçº§ç³»ç»Ÿ

- **P0** - ç«‹å³ä¿®å¤ï¼ˆé”™è¯¯çº§åˆ«ï¼‰
- **P1** - å°½å¿«ä¿®å¤ï¼ˆå®‰å…¨ã€å†…å­˜ï¼‰
- **P2** - è®¡åˆ’ä¿®å¤ï¼ˆè§„èŒƒé—®é¢˜ï¼‰

---

## ğŸ› ï¸ å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# ç¼–è¯‘ TypeScript
npm run build

# è¿è¡Œæµ‹è¯•
npm test
```

---

## ğŸ“ è®¸å¯è¯

MIT Â© 2025

---

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [ğŸ“š æ–‡æ¡£ä¸­å¿ƒ](./docs/)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](./docs/guides/quick-start.md)
- [âœ… çœŸå®éªŒè¯](./docs/reports/real-project-validation.md)
- [ğŸ“Š HTML æŠ¥å‘Š](./docs/reports/html-report-guide.md)